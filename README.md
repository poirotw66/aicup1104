# è­¦ç¤ºå¸³æˆ¶åµæ¸¬ç³»çµ±

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

æœ¬å°ˆæ¡ˆæ¡ç”¨**ç‰¹å¾µæ¢ç´¢èˆ‡è¦å‰‡å»ºç«‹**çš„æ–¹å¼ï¼Œåˆ†æè­¦ç¤ºå¸³æˆ¶çš„äº¤æ˜“è¡Œç‚ºæ¨¡å¼ï¼Œä¸¦å»ºç«‹å¯è§£é‡‹çš„è¦å‰‡é€²è¡Œé æ¸¬ã€‚

### æ ¸å¿ƒç†å¿µ
ä¸ç›´æ¥è¨“ç·´é»‘ç®±æ¨¡å‹ï¼Œè€Œæ˜¯ï¼š
1. æ·±å…¥åˆ†æè­¦ç¤ºå¸³æˆ¶ vs æ­£å¸¸å¸³æˆ¶çš„å·®ç•°
2. ç™¼ç¾é¡¯è‘—çš„è¡Œç‚ºç‰¹å¾µ
3. å»ºç«‹å¯è§£é‡‹çš„åˆ¤å®šè¦å‰‡
4. åŸºæ–¼è¦å‰‡é€²è¡Œé æ¸¬

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å®‰è£ä¾è³´
```bash
pip install -r requirements.txt
```

### åŸ·è¡Œç¨‹å¼

#### **æ–¹å¼ 1ï¼šä½¿ç”¨å¿«é€Ÿå•Ÿå‹•è…³æœ¬ï¼ˆæœ€ç°¡å–®ï¼‰** â­æ¨è–¦
```bash
./quick_start.sh
```
æœƒè‡ªå‹•å¼•å°æ‚¨é¸æ“‡æœ€ä½³åŸ·è¡Œæ–¹å¼ï¼

#### **æ–¹å¼ 2ï¼šæ‰‹å‹•åŸ·è¡Œ**

##### åŸºç¤å„ªåŒ–ç‰ˆæœ¬ï¼ˆå¿« 3-9 å€ï¼‰
```bash
python main_fast.py
```

##### çµ‚æ¥µå„ªåŒ–ç‰ˆæœ¬ï¼ˆå¿« 15-50 å€ï¼‰âš¡âš¡âš¡
```bash
# æ­¥é©Ÿ 1: è½‰æ›ç‚º Parquetï¼ˆä¸€æ¬¡æ€§ï¼Œ1-2 åˆ†é˜ï¼‰
python convert_to_parquet.py

# æ­¥é©Ÿ 2: åŸ·è¡Œçµ‚æ¥µç‰ˆæœ¬
python main_ultra_fast.py
```

##### åŸå§‹ç‰ˆæœ¬ï¼ˆ30-45 åˆ†é˜ï¼‰
```bash
python main.py
```

### æª¢æŸ¥åŸ·è¡Œé€²åº¦
```bash
./check_progress.sh
```

### è©³ç´°å„ªåŒ–æŒ‡å—
åƒè€ƒ `OPTIMIZATION_GUIDE.md` äº†è§£æ‰€æœ‰å„ªåŒ–æ–¹æ¡ˆ

---

## ğŸ“‚ è³‡æ–™æª”æ¡ˆ

### è¼¸å…¥è³‡æ–™
- `raw_data/acct_alert.csv` - 1,004 å€‹è­¦ç¤ºå¸³æˆ¶
- `raw_data/acct_transaction.csv` - å®Œæ•´äº¤æ˜“è¨˜éŒ„ï¼ˆ703MBï¼‰
- `raw_data/acct_predict.csv` - 4,780 å€‹å¾…é æ¸¬å¸³æˆ¶

### è¼¸å‡ºæª”æ¡ˆ
- `output/predictions.csv` - **æœ€çµ‚é æ¸¬çµæœ** â­
- `output/features.csv` - æå–çš„ç‰¹å¾µ
- `output/feature_comparison.csv` - è­¦ç¤º vs æ­£å¸¸å¸³æˆ¶ç‰¹å¾µå°æ¯”
- `output/decision_tree.png` - æ±ºç­–æ¨¹è¦–è¦ºåŒ–
- `output/final_rules.json` - å»ºç«‹çš„åˆ¤å®šè¦å‰‡
- `output/rule_evaluation.json` - è¦å‰‡æ•ˆèƒ½è©•ä¼°

---

## ğŸ” åˆ†ææµç¨‹

### Phase 1: è³‡æ–™è¼‰å…¥
- è¼‰å…¥è­¦ç¤ºå¸³æˆ¶ã€é æ¸¬ç›®æ¨™å¸³æˆ¶
- å»ºç«‹è­¦ç¤ºå¸³æˆ¶å­—å…¸

### Phase 2: ç‰¹å¾µå·¥ç¨‹
æå–ç´„ **40+ å€‹ç‰¹å¾µ**ï¼ŒåŒ…æ‹¬ï¼š

#### åŸºç¤çµ±è¨ˆï¼ˆ14 å€‹ï¼‰
- äº¤æ˜“æ¬¡æ•¸ã€ç¸½é‡‘é¡ã€å¹³å‡é‡‘é¡
- æœ€å¤§/æœ€å°é‡‘é¡ã€æ¨™æº–å·®
- æ´»èºå¤©æ•¸ã€ç”Ÿå‘½é€±æœŸ

#### è¡Œç‚ºæ¨¡å¼ï¼ˆ8 å€‹ï¼‰
- è½‰å‡º/è½‰å…¥æ¯”ä¾‹
- äº¤æ˜“é »ç‡ã€å°æ‰‹æ•¸é‡
- æ¯æ—¥äº¤æ˜“çµ±è¨ˆ

#### æ™‚é–“ç‰¹å¾µï¼ˆ6 å€‹ï¼‰
- å‡Œæ™¨äº¤æ˜“æ¯”ä¾‹ï¼ˆ0-6æ™‚ï¼‰
- å·¥ä½œæ™‚é–“äº¤æ˜“æ¯”ä¾‹ï¼ˆ9-18æ™‚ï¼‰
- äº¤æ˜“æ™‚é–“åˆ†å¸ƒ

#### é¢¨éšªæŒ‡æ¨™ï¼ˆ7 å€‹ï¼‰
- è‡ªæˆ‘äº¤æ˜“æ¯”ä¾‹
- æœªçŸ¥è³‡è¨Šæ¯”ä¾‹
- å¤§é¡äº¤æ˜“æ¯”ä¾‹
- èˆ‡è­¦ç¤ºå¸³æˆ¶çš„äº’å‹•

#### ç¶²çµ¡ç‰¹å¾µï¼ˆ5 å€‹ï¼‰
- äº¤æ˜“å°æ‰‹é‡ç–Šåº¦
- äº¤æ˜“é›†ä¸­åº¦
- å¹³å‡æ¯å°æ‰‹äº¤æ˜“æ¬¡æ•¸

### Phase 3: æ¢ç´¢æ€§è³‡æ–™åˆ†æ (EDA)
- çµ±è¨ˆæª¢é©—ï¼ˆMann-Whitney U testï¼‰
- æ•ˆæ‡‰é‡è¨ˆç®—ï¼ˆCohen's dï¼‰
- è­˜åˆ¥é¡¯è‘—å·®ç•°ç‰¹å¾µ
- è¦–è¦ºåŒ–åˆ†æ

### Phase 4: æ¨¡å¼ç™¼ç¾
- **æ±ºç­–æ¨¹åˆ†æ**ï¼ˆmax_depth=4ï¼‰- ç†è§£æ±ºç­–é‚è¼¯
- **èšé¡åˆ†æ**ï¼ˆK-meansï¼‰- ç™¼ç¾è­¦ç¤ºå¸³æˆ¶é¡å‹
- **ç•°å¸¸æª¢æ¸¬**ï¼ˆIsolation Forestï¼‰

### Phase 5: è¦å‰‡å»ºç«‹
- åŸºæ–¼ç‰¹å¾µå·®ç•°è‡ªå‹•ç”Ÿæˆè¦å‰‡
- å„ªåŒ–é–¾å€¼ä»¥æœ€å¤§åŒ– F1-Score
- ä½¿ç”¨åŠ æ¬Šè©•åˆ†æ³•

### Phase 6: é æ¸¬
- æ‡‰ç”¨è¦å‰‡åˆ°é æ¸¬é›†
- ç‚ºæ¯å€‹é æ¸¬æä¾›è§£é‡‹
- è¼¸å‡ºä¿¡å¿ƒåˆ†æ•¸å’Œè§¸ç™¼è¦å‰‡

---

## ğŸ“Š æ•ˆèƒ½å„ªåŒ–

### å„ªåŒ–ç‰ˆæœ¬ (`main_fast.py`)
- âœ… ä½¿ç”¨å‘é‡åŒ–æ“ä½œï¼ˆå–ä»£é€è¡Œè¿´åœˆï¼‰
- âœ… å¢åŠ  chunk size (100K â†’ 500K)
- âœ… å„ªåŒ–è¨˜æ†¶é«”ä½¿ç”¨

### æ•ˆèƒ½å°æ¯”
| ç‰ˆæœ¬ | æ™‚é–“ | åŠ é€Ÿæ¯” |
|------|------|--------|
| åŸå§‹ç‰ˆæœ¬ | 30-45 åˆ†é˜ | 1x |
| **å„ªåŒ–ç‰ˆæœ¬** | **5-15 åˆ†é˜** | **3-9x** |

è©³ç´°èªªæ˜ï¼š`PERFORMANCE_GUIDE.md`

---

## ğŸ¯ è©•ä¼°æŒ‡æ¨™

ä¸»è¦æŒ‡æ¨™ï¼š**F1-Score**
- å¹³è¡¡ Precision å’Œ Recall
- é©åˆé¡åˆ¥ä¸å¹³è¡¡å•é¡Œ

è¼”åŠ©æŒ‡æ¨™ï¼š
- Precisionï¼ˆç²¾ç¢ºç‡ï¼‰
- Recallï¼ˆå¬å›ç‡ï¼‰
- Confusion Matrix

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
aicup1104/
â”œâ”€â”€ raw_data/              # åŸå§‹è³‡æ–™
â”‚   â”œâ”€â”€ acct_alert.csv
â”‚   â”œâ”€â”€ acct_transaction.csv
â”‚   â””â”€â”€ acct_predict.csv
â”œâ”€â”€ src/                   # åŸå§‹ç¢¼æ¨¡çµ„
â”‚   â”œâ”€â”€ data_loader.py
â”‚   â”œâ”€â”€ feature_engineering.py
â”‚   â”œâ”€â”€ feature_engineering_fast.py  # å„ªåŒ–ç‰ˆæœ¬
â”‚   â”œâ”€â”€ eda_analysis.py
â”‚   â”œâ”€â”€ pattern_discovery.py
â”‚   â””â”€â”€ rule_predictor.py
â”œâ”€â”€ output/                # è¼¸å‡ºæª”æ¡ˆ
â”‚   â””â”€â”€ predictions.csv    # æœ€çµ‚é æ¸¬çµæœ
â”œâ”€â”€ main.py               # ä¸»åŸ·è¡Œè…³æœ¬ï¼ˆåŸå§‹ç‰ˆæœ¬ï¼‰
â”œâ”€â”€ main_fast.py          # ä¸»åŸ·è¡Œè…³æœ¬ï¼ˆå„ªåŒ–ç‰ˆæœ¬ï¼‰â­
â”œâ”€â”€ test_start.py         # æ¸¬è©¦è…³æœ¬
â”œâ”€â”€ check_progress.sh     # é€²åº¦æª¢æŸ¥è…³æœ¬
â”œâ”€â”€ requirements.txt      # ä¾è³´å¥—ä»¶
â”œâ”€â”€ README.md            # æœ¬æª”æ¡ˆ
â””â”€â”€ PERFORMANCE_GUIDE.md # æ•ˆèƒ½å„ªåŒ–æŒ‡å—
```

---

## ğŸ”§ é—œéµæ¨¡çµ„èªªæ˜

### `data_loader.py`
- åˆ†æ‰¹è¼‰å…¥å¤§å‹äº¤æ˜“æª”æ¡ˆ
- æ™‚é–“çª—å£éæ¿¾ï¼ˆåªä½¿ç”¨è­¦ç¤ºæ—¥æœŸå‰çš„è³‡æ–™ï¼‰
- è¨˜æ†¶é«”å„ªåŒ–

### `feature_engineering_fast.py`ï¼ˆå„ªåŒ–ç‰ˆæœ¬ï¼‰
- ä½¿ç”¨ Pandas å‘é‡åŒ–æ“ä½œ
- 10-50 å€æ•ˆèƒ½æå‡
- æå– 40+ å€‹ç‰¹å¾µ

### `eda_analysis.py`
- çµ±è¨ˆæª¢é©—èˆ‡æ•ˆæ‡‰é‡è¨ˆç®—
- ç‰¹å¾µåˆ†å¸ƒè¦–è¦ºåŒ–
- ç›¸é—œæ€§åˆ†æ

### `pattern_discovery.py`
- æ·ºå±¤æ±ºç­–æ¨¹ï¼ˆå¯è§£é‡‹ï¼‰
- K-means èšé¡
- Isolation Forest ç•°å¸¸æª¢æ¸¬

### `rule_predictor.py`
- è¦å‰‡é¡åˆ¥å®šç¾©
- è‡ªå‹•è¦å‰‡ç”Ÿæˆ
- é–¾å€¼å„ªåŒ–
- é æ¸¬è§£é‡‹

---

## ğŸ“– ä½¿ç”¨ç¯„ä¾‹

### æŸ¥çœ‹é æ¸¬çµæœ
```python
import pandas as pd

# è¼‰å…¥é æ¸¬çµæœ
predictions = pd.read_csv('output/predictions.csv')

# æŸ¥çœ‹è¢«é æ¸¬ç‚ºè­¦ç¤ºå¸³æˆ¶çš„æ•¸é‡
alert_count = predictions['label'].sum()
print(f"é æ¸¬ç‚ºè­¦ç¤ºå¸³æˆ¶: {alert_count}")

# æŸ¥çœ‹é«˜ä¿¡å¿ƒåº¦çš„è­¦ç¤ºå¸³æˆ¶
high_conf = predictions[
    (predictions['label'] == 1) & 
    (predictions['confidence_score'] > 0.7)
]
print(f"é«˜ä¿¡å¿ƒåº¦è­¦ç¤ºå¸³æˆ¶: {len(high_conf)}")

# æŸ¥çœ‹è§¸ç™¼çš„è¦å‰‡
print(high_conf[['acct', 'confidence_score', 'triggered_rules']].head())
```

### åˆ†æç‰¹å¾µé‡è¦æ€§
```python
# è¼‰å…¥ç‰¹å¾µæ¯”è¼ƒçµæœ
comparison = pd.read_csv('output/feature_comparison.csv')

# æŸ¥çœ‹å·®ç•°æœ€å¤§çš„ç‰¹å¾µ
top_features = comparison.sort_values('effect_size', ascending=False, key=abs).head(10)
print(top_features[['feature', 'alert_mean', 'normal_mean', 'effect_size', 'significance']])
```

---

## âš ï¸ æ³¨æ„äº‹é …

1. **é¦–æ¬¡åŸ·è¡Œæ™‚é–“è¼ƒé•·**ï¼šéœ€è¦è™•ç† 703MB äº¤æ˜“è³‡æ–™
2. **è¨˜æ†¶é«”éœ€æ±‚**ï¼šå»ºè­°è‡³å°‘ 8GB RAM
3. **ç‰¹å¾µæœƒè¢«å¿«å–**ï¼šç¬¬äºŒæ¬¡åŸ·è¡Œæœƒå¿«å¾ˆå¤šï¼ˆç›´æ¥è¼‰å…¥ `output/features.csv`ï¼‰
4. **é‡æ–°æå–ç‰¹å¾µ**ï¼šåˆªé™¤ `output/features.csv` å¾Œé‡æ–°åŸ·è¡Œ

---

## ğŸ¤” å¸¸è¦‹å•é¡Œ

### Q: ç¨‹å¼åŸ·è¡Œæ²’æœ‰è¼¸å‡ºï¼Ÿ
A: ä½¿ç”¨ `python -u main_fast.py` æˆ–åŸ·è¡Œ `./check_progress.sh` æŸ¥çœ‹é€²åº¦

### Q: èƒ½ç”¨ GPU åŠ é€Ÿå—ï¼Ÿ
A: ä¸é©ç”¨ã€‚æœ¬å°ˆæ¡ˆçš„ç“¶é ¸åœ¨ I/O å’Œè³‡æ–™è™•ç†ï¼ŒGPU ç„¡æ³•åŠ é€Ÿ

### Q: å¦‚ä½•æé«˜åŸ·è¡Œé€Ÿåº¦ï¼Ÿ
A: 
1. ä½¿ç”¨ `main_fast.py`ï¼ˆå·²å„ªåŒ–ï¼‰
2. å¯é¸ï¼šè½‰æ›ç‚º Parquet æ ¼å¼ï¼ˆåƒè€ƒ `PERFORMANCE_GUIDE.md`ï¼‰

### Q: å¦‚ä½•ç†è§£é æ¸¬çµæœï¼Ÿ
A: æŸ¥çœ‹ `output/predictions.csv` ä¸­çš„ `triggered_rules` æ¬„ä½ï¼Œé¡¯ç¤ºè§¸ç™¼äº†å“ªäº›è¦å‰‡

### Q: F1-Score åä½æ€éº¼è¾¦ï¼Ÿ
A: 
1. èª¿æ•´è¦å‰‡é–¾å€¼
2. å¢åŠ æ›´å¤šç‰¹å¾µ
3. çµåˆå°ˆå®¶çŸ¥è­˜èª¿æ•´è¦å‰‡æ¬Šé‡

---

## ğŸ“ æ”¯æ´

å¦‚æœ‰å•é¡Œï¼Œè«‹æª¢æŸ¥ï¼š
1. `output/execution_fast.log` - åŸ·è¡Œæ—¥èªŒ
2. `PERFORMANCE_GUIDE.md` - æ•ˆèƒ½å„ªåŒ–æŒ‡å—
3. `check_progress.sh` - é€²åº¦æª¢æŸ¥

---

## ğŸ“„ æˆæ¬Š

æœ¬å°ˆæ¡ˆç‚º AI Cup ç«¶è³½ç”¨é€”ã€‚

---

**æœ€å¾Œæ›´æ–°ï¼š2025-11-04**

